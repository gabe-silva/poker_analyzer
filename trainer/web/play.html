<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PokerNow Trainer - Analyzer & Play</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body data-page="play">
  <div class="backdrop-orb orb-a"></div>
  <div class="backdrop-orb orb-b"></div>
  <div class="page-wrap">
    <header class="top-hero">
      <h1>PokerNow Trainer</h1>
      <p id="playWorkspaceSubtitle">Analyze profile stats and compare players side-by-side.</p>
      <nav class="top-nav">
        <a href="/index.html" class="nav-link">Plans</a>
        <a id="navAnalyzerLink" href="/play.html" class="nav-link active">Analyzer</a>
        <a href="/setup.html" class="nav-link">Setup</a>
        <a id="navTrainerLink" href="/trainer.html" class="nav-link">Trainer</a>
        <a href="/login.html" class="nav-link">Account</a>
      </nav>
    </header>

    <main class="play-layout">
      <section class="panel">
        <h2 id="playWorkspaceTitle">Analyzer</h2>
        <div id="planBadge" class="meta-strip"></div>
        <div id="analyzerGuide" class="meta-strip">
          How to use: Upload files, click <strong>Upload Hand Files</strong>, select username(s), then click <strong>Analyze Selected Profile</strong>.
        </div>
        <div id="analyzerActionGuide" class="hero-profile-block quick-guide">
          <h3>Action Guide</h3>
          <ol class="play-guide-list">
            <li><strong>Analyze Selected Profile</strong>: one player dashboard.</li>
            <li><strong>Compare Two Players</strong>: side-by-side comparison.</li>
          </ol>
        </div>
        <div id="trainingWorkspaceNotice" class="hero-profile-block quick-guide" style="display:none;">
          <h3>Elite Friend Training</h3>
          <ol class="play-guide-list">
            <li>Use the <strong>Setup</strong> tab for normal scenario training workflows.</li>
            <li>Use this workspace only for training against one friend profile at a time.</li>
            <li>Upload or refresh hand files, then select exactly one friend username.</li>
            <li>Set targeted spot controls using your local setup defaults.</li>
            <li>Click <strong>Start Match</strong> to begin full-hand progression.</li>
          </ol>
        </div>

        <div id="modeToggleRow" class="mode-toggle-row">
          <label class="mode-pill">
            <input id="playModeFull" type="radio" name="playMode" value="full_match" checked />
            <span>Full Match</span>
          </label>
          <label class="mode-pill">
            <input id="playModeDrill" type="radio" name="playMode" value="single_hand_drill" />
            <span>Single Hand Drill</span>
          </label>
        </div>

        <div class="field-grid">
          <label>
            Upload PokerNow JSON files
            <input id="handsFiles" type="file" accept=".json,application/json" multiple />
          </label>
          <label id="analyzerPlayersLabel">
            Friend usernames
            <select id="analyzerPlayers" multiple size="8"></select>
          </label>
          <div class="action-row">
            <button id="uploadHandsBtn" class="btn-primary" type="button">Upload Hand Files</button>
          </div>
          <div id="handsStatus" class="meta-strip">No uploaded hand files yet.</div>
          <label id="startingStackWrap">
            Starting Stack (bb)
            <input id="startingStackBb" type="number" min="20" max="400" step="1" value="100" />
          </label>
          <label id="liveSeedWrap">
            Random Seed (optional)
            <input id="liveSeed" type="number" min="1" step="1" placeholder="auto" />
          </label>
        </div>

        <div id="analysisActionsRow" class="action-row">
          <button id="analyzeProfileBtn" class="btn-primary" type="button">Analyze Selected Profile</button>
          <button id="compareProfilesBtn" class="btn-ghost" type="button">Compare Two Players</button>
        </div>

        <div id="compareConfig" class="hero-profile-block" style="display:none;">
          <h3>Two-Player Compare (Pro+)</h3>
          <div class="field-grid">
            <label>
              Player A (type to pick from list)
              <input id="comparePlayerA" type="text" list="comparePlayerList" placeholder="Start typing a player name" />
            </label>
            <label>
              Player B (type to pick from list)
              <input id="comparePlayerB" type="text" list="comparePlayerList" placeholder="Start typing a player name" />
            </label>
          </div>
          <datalist id="comparePlayerList"></datalist>
        </div>

        <div class="toggle-row">
          <label id="targetedModeWrap" class="switch-wrap">
            <input id="targetedMode" type="checkbox" />
            <span>Start From Targeted Scenario (instead of full preflop hand)</span>
          </label>
        </div>
        <div id="targetConfigGuide" class="meta-strip">
          Setup options: targeted spot controls use your local Setup tab defaults.
        </div>

        <div id="targetConfigWrap" class="hero-profile-block">
          <h3>Targeted Spot Controls</h3>
          <div class="field-grid">
            <label>Street<select id="tStreet"></select></label>
            <label>Node Type<select id="tNodeType"></select></label>
            <label>Action Context<select id="tActionContext"></select></label>
            <label>Hero Position<select id="tHeroPosition"></select></label>
            <label id="trainingStyleWrap">
              Training Style For Hero
              <select id="trainingStyle"></select>
            </label>
          </div>
        </div>

        <div id="fullModeActions" class="action-row">
          <button id="startLiveBtn" class="btn-primary">Start Match</button>
          <button id="nextHandBtn" class="btn-ghost">Next Hand</button>
          <a class="btn-ghost nav-button" href="/trainer.html">Back To Trainer</a>
        </div>
        <div id="drillModeActions" class="action-row" style="display:none;">
          <button id="startDrillBtn" class="btn-primary">Start Drill</button>
          <button id="newDrillBtn" class="btn-ghost">New Hand</button>
          <a class="btn-ghost nav-button" href="/trainer.html">Back To Trainer</a>
        </div>
      </section>

      <section id="profilePanel" class="panel" style="display:none;">
        <h2>Profile Dashboard</h2>
        <div id="profileDashboard" class="feedback-summary">Analyze a selected profile to see stats.</div>
      </section>

      <section class="panel" id="comparisonPanel" style="display:none;">
        <h2>Two-Player Comparison</h2>
        <div id="comparisonDashboard" class="feedback-summary">Pick Player A and Player B, then click Compare Two Players.</div>
      </section>

      <section id="fullModePanel" class="panel" style="display:none;">
        <h2>Live Table</h2>
        <div id="liveMeta" class="meta-strip">No live session yet.</div>
        <div id="balanceTracker" class="hero-profile-block">Balance tracker appears after match start.</div>
        <div id="liveTable" class="table-view empty">Start a match to play vs profile.</div>
        <div id="liveActions" class="decision-panel"></div>
      </section>

      <section id="drillModePanel" class="panel" style="display:none;">
        <h2>Single Hand Drill</h2>
        <div id="drillMeta" class="meta-strip">No profile drill hand generated yet.</div>
        <div id="drillTable" class="table-view empty">Start a drill hand to train one decision with full EV feedback.</div>
        <div id="drillPrompt" class="prompt-box"></div>
        <div id="drillDecisionPanel" class="decision-panel"></div>
        <div id="drillFeedbackSummary" class="feedback-summary">Submit a drill decision to see EV ranking and leak decomposition.</div>
        <div id="drillEvTableWrap"></div>
        <div id="drillLeakBreakdownWrap"></div>
      </section>

      <section id="matchNotesPanel" class="panel" style="display:none;">
        <h2>Match Notes</h2>
        <div id="opponentSummary" class="feedback-summary">Opponent summary appears after match start.</div>
      </section>
    </main>

    <p id="statusLine" class="status-line"></p>
  </div>

  <script src="/live.js"></script>
</body>
</html>
